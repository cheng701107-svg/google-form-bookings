<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>å¡«å¯«é ç´„è³‡æ–™</title>

<style>
  body{
    font-family:"Noto Sans TC",sans-serif;
    background:#f7f7f7;
    margin:0;
  }

  /* ====== çµ±ä¸€é é¢å¯¬åº¦ ====== */
  .page-container{
    max-width:760px;
    margin:0 auto;
    padding:30px 18px;
  }

  h2{
    text-align:center;
    font-size:26px;
    font-weight:800;
    margin-bottom:26px;
  }

  /* ====== è¨‚å–®æ‘˜è¦å¡ ====== */
  .info-box{
    background:#fff;
    border-radius:16px;
    padding:22px;
    box-shadow:0 4px 12px rgba(0,0,0,0.06);
    font-size:17px;
    margin-bottom:28px;
    line-height:1.7;
  }

  .info-box div span{
    font-weight:700;
    color:#005bbb;
  }

  /* ====== è¡¨å–® ====== */
  form{
    background:#fff;
    padding:22px 22px 30px;
    border-radius:16px;
    box-shadow:0 4px 12px rgba(0,0,0,0.06);
  }

  .field{
    margin-bottom:20px;
  }

  label{
    font-size:15px;
    font-weight:700;
    display:block;
    margin-bottom:6px;
    color:#333;
  }

  input,textarea,select{
    width:100%;
    padding:14px;
    font-size:16px;
    border-radius:10px;
    border:1px solid #ccc;
    background:#fff;
    transition:0.2s;
  }

  input:focus,textarea:focus,select:focus{
    border-color:#1a73e8;
    box-shadow:0 0 0 3px rgba(26,115,232,.2);
    outline:none;
  }

  textarea{height:95px;}

  /* ====== é€å‡ºæŒ‰éˆ• ====== */
  .btn{
    background:#1a73e8;
    color:#fff;
    width:100%;
    padding:18px;
    text-align:center;
    border-radius:12px;
    font-size:20px;
    font-weight:800;
    cursor:pointer;
    margin-top:28px;
    transition:.18s;
  }

  .btn:hover{opacity:.86;}
/* ===== çµ±ä¸€å…§å®¹å±•ç¤ºå¯¬åº¦ ===== */
.page-container{
  max-width:760px;
  margin:0 auto;
  padding:30px 18px;
}

/* å…§å®¹å€å¡Šçµ±ä¸€æ”¶æ–‚ï¼Œä¸å†å·¦å³æ’é–‹ */
.info-box,
form,
.btn{
  max-width:650px;   /* â† ä½ å¯æ”¹ 620 / 700 */
  margin:0 auto;
}

</style>
</head>

<body>

<div class="page-container">

<h2>å¡«å¯«é ç´„è³‡æ–™</h2>

<!-- è¨‚å–®æ‘˜è¦ -->
<div class="info-box">
  <div>æˆ¿å‹ï¼š<span id="roomTitle">â€”</span></div>
  <div>å…¥ä½ï¼š<span id="checkin">â€”</span></div>
  <div>é€€æˆ¿ï¼š<span id="checkout">â€”</span></div>
  <div>æ™šæ•¸ï¼š<span id="nights">â€”</span></div>
  <div style="margin-top:6px;font-size:18px">
    ç¸½é‡‘é¡ï¼š<b style="color:#0B7D2B;font-size:20px"><span id="total"></span></b>
  </div>
</div>

<!-- è¡¨å–® -->
<form id="bookingForm">
  <div class="field">
    <label>å§“åï¼ˆå¿…å¡«ï¼‰</label>
    <input type="text" id="name" required>
  </div>

  <div class="field">
    <label>æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆå¿…å¡«ï¼‰</label>
    <input type="tel" id="phone" required placeholder="0912345678">
  </div>

  <div class="field">
    <label>Emailï¼ˆé¸å¡«ï¼‰</label>
    <input type="email" id="email">
  </div>

  <div class="field">
    <label>å¤§äººäººæ•¸</label>
    <input type="number" id="adult" min="1" value="1">
  </div>

  <div class="field">
    <label>å°å­©äººæ•¸</label>
    <input type="number" id="child" min="0" value="0">
  </div>

  <div class="field">
    <label>æ˜¯å¦æ”œå¸¶å¯µç‰©</label>
    <select id="pet">
      <option value="ç„¡">ç„¡</option>
      <option value="æœ‰">æœ‰</option>
    </select>
  </div>

  <div class="field">
    <label>å‚™è¨»</label>
    <textarea id="note"></textarea>
  </div>
</form>

<!-- æŒ‰éˆ• -->
<div class="btn" id="submitBtn">é€å‡ºé ç´„ âœ</div>

</div><!--container END-->

<script>
/*** å–å¾— URL åƒæ•¸ ***/
const params=new URLSearchParams(location.search);
const roomId=params.get("roomId");
const checkIn=params.get("date");
const nights=Number(params.get("nights"));

/*** è¨ˆç®—é€€æˆ¿ ***/
let checkout="-";
if(checkIn&&nights){
  const d=new Date(checkIn);
  d.setDate(d.getDate()+nights);
  checkout=d.toISOString().split("T")[0];
}

document.getElementById("checkin").innerText=checkIn??"-";
document.getElementById("checkout").innerText=checkout??"-";
document.getElementById("nights").innerText=nights??"-";

/*** æˆ¿å‹ + é‡‘é¡è¨ˆç®— ***/
async function loadRoom(){
  const res=await fetch("data/rooms.json");
  const rooms=await res.json();
  const room=rooms.find(r=>r.id===roomId);

  document.getElementById("roomTitle").innerText=room.title;

  let total=0,sd=new Date(checkIn);
  for(let i=0;i<nights;i++){
    const d=new Date(sd);d.setDate(sd.getDate()+i);
    const k=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
    if(room.specialPrice&&room.specialPrice[k]){total+=room.specialPrice[k];continue;}
    total+=([0,6].includes(d.getDay())?room.priceWeekend:room.priceWeekday);
  }
  document.getElementById("total").innerText="NT$ "+total.toLocaleString();
}
loadRoom();

/*** é€å‡ºï¼ˆæœªä¸²å¾Œç«¯ï¼‰ ***/
document.getElementById("submitBtn").onclick=()=>{
  alert("ğŸ“¨ é ç´„å·²é€å‡ºï¼ˆç›®å‰ç‚ºç¤ºç¯„ï¼Œå¯ä¸²æ¥å¾Œç«¯ï¼‰");
};
</script>

</body>
</html>
